<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Films with English Subtitles - Stockholm Cinemas</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
    <style>
/* Reset and base styles */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    line-height: 1.6;
    color: #2d3748;
    background-color: #ffffff;
}

/* Header and Navigation */
.header {
    background: #ffffff;
    border-bottom: 1px solid #e2e8f0;
    position: sticky;
    top: 0;
    z-index: 100;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.nav-container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 2rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
    height: 4rem;
}

.logo {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 1.25rem;
    font-weight: 600;
    color: #1a202c;
}

.logo i {
    color: #3182ce;
    font-size: 1.5rem;
}

.nav-links {
    display: flex;
    gap: 2rem;
}

.nav-links a {
    text-decoration: none;
    color: #4a5568;
    font-weight: 500;
    transition: color 0.2s ease;
}

.nav-links a:hover {
    color: #3182ce;
}

/* Hero Section */
.hero {
    background: 
        linear-gradient(135deg, rgba(102, 126, 234, 0.85) 0%, rgba(118, 75, 162, 0.85) 100%),
        url('https://images.unsplash.com/photo-1509356843151-3e7d96241e11?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D') center/cover no-repeat;
    color: white;
    padding: 4rem 2rem;
    text-align: center;
    position: relative;
}

.hero-content {
    max-width: 1000px;
    margin: 0 auto;
}

.hero-title {
    font-size: 3rem;
    font-weight: 700;
    margin-bottom: 1rem;
    line-height: 1.2;
}

.hero-subtitle {
    font-size: 1.25rem;
    margin-bottom: 2rem;
    opacity: 0.9;
    font-weight: 300;
}

.stats {
    display: flex;
    justify-content: center;
    gap: 3rem;
    margin-top: 2rem;
}

.stat {
    display: flex;
    flex-direction: column;
    align-items: center;
}

.stat-number {
    font-size: 2rem;
    font-weight: 700;
    line-height: 1;
}

.stat-label {
    font-size: 0.875rem;
    opacity: 0.8;
    font-weight: 400;
}

/* Controls Section */
.controls {
    background: #f7fafc;
    padding: 1rem 2rem;
    border-bottom: 1px solid #e2e8f0;
}

.controls-container {
    max-width: 1200px;
    margin: 0 auto;
    display: flex;
    gap: 0.75rem;
    justify-content: center;
    align-items: center;
}

/* Search Box */
.search-box {
    position: relative;
    width: 300px;
}

.search-box i {
    position: absolute;
    left: 0.75rem;
    top: 50%;
    transform: translateY(-50%);
    color: #718096;
    font-size: 0.875rem;
}

.search-box input {
    width: 100%;
    padding: 0.5rem 0.75rem 0.5rem 2rem;
    border: 1px solid #cbd5e0;
    border-radius: 0.375rem;
    font-size: 0.875rem;
    background: white;
    transition: border-color 0.2s, box-shadow 0.2s;
}

.search-box input:focus {
    outline: none;
    border-color: #3182ce;
    box-shadow: 0 0 0 3px rgba(49, 130, 206, 0.1);
}

.filter-select {
    padding: 0.5rem 0.75rem;
    border: 1px solid #cbd5e0;
    border-radius: 0.375rem;
    font-size: 0.875rem;
    background: white;
    color: #4a5568;
    cursor: pointer;
    transition: border-color 0.2s, box-shadow 0.2s;
    min-width: 120px;
    max-width: 160px;
}

.filter-select:focus {
    outline: none;
    border-color: #3182ce;
    box-shadow: 0 0 0 3px rgba(49, 130, 206, 0.1);
}

.filter-select:hover {
    border-color: #a0aec0;
}

/* Responsive Design for Controls */
@media (max-width: 768px) {
    .controls {
        padding: 0.75rem 1rem;
    }
    
    .controls-container {
        flex-wrap: wrap;
        gap: 0.5rem;
    }
    
    .search-box {
        flex: 1 1 100%;
        max-width: none;
        margin-bottom: 0.25rem;
    }
    
    .filter-select {
        flex: 1;
        min-width: 100px;
        max-width: none;
    }
}

.filters-container {
    max-width: 1200px;
    margin: 0 auto;
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 1.5rem;
}

.filter-group {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}

.filter-group label {
    font-weight: 500;
    color: #4a5568;
    font-size: 0.875rem;
}

.filter-group input,
.filter-group select {
    padding: 0.75rem;
    border: 1px solid #cbd5e0;
    border-radius: 0.5rem;
    font-size: 0.875rem;
    background: white;
    transition: border-color 0.2s ease, box-shadow 0.2s ease;
}

.filter-group input:focus,
.filter-group select:focus {
    outline: none;
    border-color: #3182ce;
    box-shadow: 0 0 0 3px rgba(49, 130, 206, 0.1);
}

/* Films Section */
.films {
    padding: 4rem 2rem;
    background: #ffffff;
}

.films-container {
    max-width: 1200px;
    margin: 0 auto;
}

.loading {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 1rem;
    padding: 4rem;
    color: #718096;
}

.loading i {
    font-size: 2rem;
}

/* No Results */
.no-results {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 4rem;
    text-align: center;
    color: #718096;
    gap: 1rem;
}

.no-results i {
    font-size: 3rem;
    color: #ed8936;
    margin-bottom: 1rem;
}

.no-results h3 {
    margin: 0;
    font-size: 1.5rem;
    font-weight: 600;
    color: #2d3748;
}

.no-results p {
    margin: 0;
    font-size: 1rem;
}

.films-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 2rem;
    margin-top: 2rem;
}

/* Film Card */
.film-card {
    background: white;
    border-radius: 1rem;
    overflow: hidden;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.07);
    transition: transform 0.2s ease, box-shadow 0.2s ease;
    border: 1px solid #e2e8f0;
    display: flex;
    flex-direction: column;
}

.film-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
}

.film-poster {
    position: relative;
    height: 400px;
    background: linear-gradient(45deg, #f7fafc, #edf2f7);
    overflow: hidden;
}

.film-poster img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.film-poster .placeholder {
    display: flex;
    align-items: center;
    justify-content: center;
    height: 100%;
    color: #a0aec0;
    font-size: 3rem;
}

.film-rating {
    position: absolute;
    top: 0.75rem;
    right: 0.75rem;
    background: rgba(0, 0, 0, 0.8);
    color: white;
    padding: 0.25rem 0.5rem;
    border-radius: 0.25rem;
    font-size: 0.75rem;
    font-weight: 600;
    display: flex;
    align-items: center;
    gap: 0.25rem;
}

.film-rating .star {
    color: #f6e05e;
}

.film-content {
    padding: 1.5rem;
    display: flex;
    flex-direction: column;
    flex: 1;
}

.film-title {
    font-size: 1.125rem;
    font-weight: 600;
    margin-bottom: 0.5rem;
    color: #1a202c;
    line-height: 1.3;
}

.film-overview {
    color: #4a5568;
    font-size: 0.875rem;
    line-height: 1.5;
    margin-bottom: 1rem;
    flex: 1;
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
    max-height: 4.2rem;
}

.film-meta {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
    margin-bottom: 1rem;
}

.meta-item {
    background: #edf2f7;
    color: #4a5568;
    padding: 0.25rem 0.5rem;
    border-radius: 0.25rem;
    font-size: 0.75rem;
    font-weight: 500;
}

.meta-item.genre {
    background: #e6fffa;
    color: #234e52;
}

.meta-item.year {
    background: #fef5e7;
    color: #744210;
}

.meta-item.source {
    background: #f0f8ff;
    color: #1e3a8a;
}

.film-showtimes {
    margin-bottom: 1rem;
    border-top: 1px solid #e2e8f0;
    padding-top: 1rem;
}

.showtimes-title {
    font-size: 0.875rem;
    font-weight: 600;
    color: #2d3748;
    margin-bottom: 0.5rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.showtime {
    background: #f7fafc;
    border: 1px solid #e2e8f0;
    padding: 0.375rem 0.5rem;
    border-radius: 0.375rem;
    font-size: 0.8rem;
    display: flex;
    flex-direction: column;
    gap: 0.125rem;
    min-width: 0; /* Allow content to shrink */
}

.showtime-time {
    font-weight: 600;
    color: #3182ce;
    font-size: 0.875rem;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.cinema-name {
    font-weight: 400;
    font-style: normal;
    font-size: 0.7rem;
    color: #6b7280;
    margin-left: 0.25rem;
    white-space: nowrap;
}



.film-footer {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding-top: 1rem;
    border-top: 1px solid #e2e8f0;
    margin-top: auto;
}

.film-link {
    color: #3182ce;
    text-decoration: none;
    font-weight: 500;
    font-size: 0.875rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    transition: color 0.2s ease;
}

.film-link:hover {
    color: #2c5aa0;
}

.film-runtime {
    color: #718096;
    font-size: 0.75rem;
}

/* No Results */
.no-results {
    text-align: center;
    padding: 4rem;
    color: #718096;
}

.no-results i {
    font-size: 3rem;
    margin-bottom: 1rem;
    opacity: 0.5;
}

.no-results h3 {
    font-size: 1.5rem;
    margin-bottom: 0.5rem;
}

/* Footer */
.footer {
    background: #1a202c;
    color: white;
    padding: 3rem 2rem 1rem;
}

.footer-content {
    max-width: 1200px;
    margin: 0 auto;
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 2rem;
    margin-bottom: 2rem;
}

.footer-section h3 {
    font-size: 1.125rem;
    font-weight: 600;
    margin-bottom: 1rem;
}

.footer-section p {
    color: #a0aec0;
    line-height: 1.6;
}

.social-links {
    display: flex;
    gap: 1rem;
}

.social-links a {
    color: #a0aec0;
    font-size: 1.25rem;
    transition: color 0.2s ease;
}

.social-links a:hover {
    color: white;
}

.footer-bottom {
    max-width: 1200px;
    margin: 0 auto;
    padding-top: 2rem;
    border-top: 1px solid #2d3748;
    text-align: center;
    color: #a0aec0;
    font-size: 0.875rem;
}

/* Responsive Design */
@media (max-width: 768px) {
    .nav-container {
        padding: 0 1rem;
    }
    
    .nav-links {
        gap: 1rem;
    }
    
    .hero {
        padding: 3rem 1rem;
    }
    
    .hero-title {
        font-size: 2rem;
    }
    
    .stats {
        gap: 1.5rem;
    }
    
    .controls {
        padding: 1.5rem;
    }
    
    .filters-container {
        grid-template-columns: 1fr;
        gap: 1rem;
    }
    
    .films {
        padding: 2rem 1rem;
    }
    
    .films-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 1rem;
    }
    
    .footer {
        padding: 2rem 1rem 1rem;
    }
    
    .footer-content {
        grid-template-columns: 1fr;
        gap: 1.5rem;
    }
}

@media (max-width: 480px) {
    .nav-links {
        display: none;
    }
    
    .hero-title {
        font-size: 1.75rem;
    }
    
    .hero-subtitle {
        font-size: 1rem;
    }
    
    .stats {
        flex-direction: column;
        gap: 1rem;
    }
    
    .films-grid {
        grid-template-columns: 1fr;
        gap: 1rem;
    }
    
    .film-card {
        margin: 0 -1rem;
        border-radius: 0;
        border-left: none;
        border-right: none;
    }
    
    /* Mobile adjustments for calendar button and showtimes */
    .showtime-container {
        gap: 0.375rem;
    }
    
    .calendar-button {
        width: 2rem;
        height: 2rem;
        font-size: 0.7rem;
    }
    
    .calendar-button i {
        font-size: 0.7rem;
    }
    
    .showtime {
        padding: 0.25rem 0.375rem;
    }
    
    .showtime-time {
        font-size: 0.8rem;
    }
    
    .cinema-name {
        font-size: 0.65rem;
    }
}

/* Animation for film cards appearing */
.film-card {
    opacity: 0;
    animation: fadeInUp 0.6s ease forwards;
}

.film-card:nth-child(1) { animation-delay: 0.1s; }
.film-card:nth-child(2) { animation-delay: 0.2s; }
.film-card:nth-child(3) { animation-delay: 0.3s; }
.film-card:nth-child(4) { animation-delay: 0.4s; }
.film-card:nth-child(5) { animation-delay: 0.5s; }
.film-card:nth-child(6) { animation-delay: 0.6s; }

@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(30px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Multi-Cinema Support Styles */
.meta-item.source.multi-cinema {
    background: #fef3cd;
    color: #92400e;
    border: 1px solid #fbbf24;
    position: relative;
}

.meta-item.source.multi-cinema::before {
    content: "üé≠ ";
    font-size: 0.75rem;
}

.showtime.multi-cinema {
    background: linear-gradient(135deg, #f7fafc 0%, #edf2f7 100%);
    border-left: 3px solid #3182ce;
}



.more-showtimes {
    text-align: center;
    color: #718096;
    font-size: 0.8rem;
    font-style: italic;
    padding: 0.5rem;
    background: #f7fafc;
    border-radius: 0.25rem;
    margin-top: 0.5rem;
}

.multi-cinema-links {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
    width: 100%;
}

.film-link.multi-link {
    background: #f8fafc;
    border: 1px solid #e2e8f0;
    padding: 0.5rem;
    border-radius: 0.25rem;
    justify-content: space-between;
    transition: all 0.2s ease;
}

.film-link.multi-link:hover {
    background: #edf2f7;
    border-color: #3182ce;
    transform: translateY(-1px);
}

/* Highlight multi-cinema films */
.film-card:has(.multi-cinema) {
    box-shadow: 0 0 0 2px #fbbf24, 0 10px 15px -3px rgba(0, 0, 0, 0.1);
}

.film-card:has(.meta-item.multi-cinema)::before {
    content: "üé≠ Multiple Cinemas";
    position: absolute;
    top: 0.5rem;
    right: 0.5rem;
    background: #fbbf24;
    color: #92400e;
    font-size: 0.7rem;
    font-weight: 600;
    padding: 0.25rem 0.5rem;
    border-radius: 1rem;
    z-index: 10;
}

/* Clickable Showtimes */
.showtime-container {
    display: flex;
    align-items: stretch;
    gap: 0.5rem;
    margin-bottom: 0.375rem;
}

.showtime-link {
    text-decoration: none;
    color: inherit;
    display: block;
    border-radius: 8px;
    transition: all 0.2s ease;
    flex: 1;
    min-width: 0; /* Allow flex item to shrink below its content size */
}

.showtime-link:hover {
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.showtime-link:hover .showtime {
    background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
    border-left-color: #0ea5e9;
}

.showtime {
    position: relative;
    cursor: pointer;
}

.showtime-arrow {
    position: absolute;
    right: 0.5rem;
    top: 50%;
    transform: translateY(-50%);
    color: #64748b;
    font-weight: bold;
    font-size: 0.8rem;
    opacity: 0;
    transition: opacity 0.2s ease;
}

.showtime-link:hover .showtime-arrow {
    opacity: 1;
}

/* Calendar Button */
.calendar-button {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 2.275rem;
    height: 2.275rem;
    background: #3182ce;
    color: white;
    border-radius: 0.375rem;
    text-decoration: none;
    transition: all 0.2s ease;
    font-size: 0.75rem;
    flex-shrink: 0;
}

.calendar-button:hover {
    background: #2c5aa0;
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(49, 130, 206, 0.3);
    color: white;
}

.calendar-button:active {
    transform: translateY(0);
}

.calendar-button i {
    font-size: 0.75rem;
}

/* Loading spinner animation */
@keyframes spin {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}

.fa-spin {
    animation: spin 1s linear infinite;
}
</style>
</head>
<body>
    <!-- Hero Section -->
    <section class="hero">
        <div class="hero-content">
            <h1>Discover Great Cinema</h1>
            <p>Find films with English subtitles at Stockholm's finest cinemas</p>
            
            <!-- Statistics -->
            <div class="stats">
                <div class="stat-item">
                    <span class="stat-number" id="total-films">-</span>
                    <span class="stat-label">Films Available</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number" id="total-cinemas">-</span>
                    <span class="stat-label">Cinemas</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number" id="total-showtimes">-</span>
                    <span class="stat-label">Showtimes</span>
                </div>
            </div>
        </div>
    </section>

    <!-- Controls -->
    <section class="controls">
        <div class="controls-container">
            <div class="search-box">
                <i class="fas fa-search"></i>
                <input type="text" id="search-input" placeholder="Search films...">
            </div>
            
            <select id="cinema-filter" class="filter-select">
                <option value="">All Cinemas</option>
            </select>
            
            <select id="genre-filter" class="filter-select">
                <option value="">All Genres</option>
            </select>
        </div>
    </section>

    <!-- Loading -->
    <div id="loading" class="loading">
        <i class="fas fa-film fa-spin"></i>
        <span>Loading films...</span>
    </div>

    <!-- No Results -->
    <div id="no-results" class="no-results" style="display: none;">
        <i class="fas fa-search"></i>
        <h3>No films found</h3>
        <p>Try adjusting your search criteria or filters.</p>
    </div>

    <!-- Films Grid -->
    <main class="main-content">
        <div class="films-container">
            <div class="films-grid" id="films-grid">
                <!-- Films will be loaded here -->
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <p>&copy; 2024 Films with English Subtitles. Data sourced from Stockholm cinemas.</p>
            <p>This is an unofficial tool to help find films with English subtitles in Stockholm.</p>
        </div>
    </footer>

    <script src="script.js"></script>
    <script id="films-data" type="application/json">[{"film_id": "13955", "url": "https://www.filminstitutet.se/sv/se-och-samtala-om-film/cinemateket-stockholm/filmer/?filmId=13955&cityId=1", "title": "Originaltitel: Haebyeonui yeoin", "director": "", "showtimes": [{"datetime": "", "display_text": "ons 3/12 kl. 18:00", "normalized_datetime": "2025-12-03T18:00:00", "normalized_date": "03.12", "normalized_time": "18:00", "source_cinema": "Cinemateket", "source_cinemas": ["Filmhuset - Bio Victor"], "source_url": "https://www.filminstitutet.se/sv/se-och-samtala-om-film/cinemateket-stockholm/filmer/?filmId=13955&cityId=1"}], "cinemas": ["Filmhuset - Bio Victor"], "scraped_at": "2025-12-02T06:26:28.269028", "tmdb": {"id": 54659, "title": "Woman on the Beach", "overview": "Film director, Joongrae, is preparing for his next movie but is unable to finish his script. So he pleads his friend, Changwook a production designer, to go with him on a trip even though Changwook had already made plans with his girlfriend, Moonsook, a composer. Eventually Changwook brings his girlfriend along and they all go on a trip to the west coast to visit Shinduri Beach Resort, which is covered with cherry blossoms and a flowing mist. There, Joongrae makes advances on Changwook's girlfriend, Moonsook. Already a fan of his films, Moonsook doesn't hide her interest. So later, while avoiding Changwook's eyes, the two spend a heated night together. But the next day Joongrae's face is filled with anxiety as he proposes to go back to Seoul. He and Moonsook then part awkwardly.", "release_date": "2006-08-31", "rating": 6.2, "vote_count": 36, "genres": ["Drama"], "poster_path": "/xYgJt5vETydZuFofUUgvJUtFVzz.jpg", "poster_url": "https://image.tmdb.org/t/p/w500/xYgJt5vETydZuFofUUgvJUtFVzz.jpg", "backdrop_path": "/6bFE0lj2QkcNc6Y9CTSdlqr0WPE.jpg", "backdrop_url": "https://image.tmdb.org/t/p/w1280/6bFE0lj2QkcNc6Y9CTSdlqr0WPE.jpg", "imdb_id": "tt0835787", "runtime": 127, "budget": 0, "revenue": 0}, "data_source": "Cinemateket", "source_file": "data/cinemateket_films_with_english_subs.json", "data_sources": ["Cinemateket"], "urls": ["https://www.filminstitutet.se/sv/se-och-samtala-om-film/cinemateket-stockholm/filmer/?filmId=13955&cityId=1"]}, {"film_id": "5360", "url": "https://www.filminstitutet.se/sv/se-och-samtala-om-film/cinemateket-stockholm/filmer/?filmId=5360&cityId=1", "title": "Originaltitel: La terra trema", "director": "", "showtimes": [{"datetime": "", "display_text": "tor 4/12 kl. 18:00", "normalized_datetime": "2025-12-04T18:00:00", "normalized_date": "04.12", "normalized_time": "18:00", "source_cinema": "Cinemateket", "source_cinemas": ["Filmhuset - Bio Victor"], "source_url": "https://www.filminstitutet.se/sv/se-och-samtala-om-film/cinemateket-stockholm/filmer/?filmId=5360&cityId=1"}], "cinemas": ["Filmhuset - Bio Victor"], "scraped_at": "2025-12-02T06:26:31.885244", "tmdb": {"id": 43445, "title": "La Terra Trema", "overview": "In rural Sicily, the fishermen live at the mercy of the greedy wholesalers. One family risks everything to buy their own boat and operate independently.", "release_date": "1949-12-03", "rating": 7.696, "vote_count": 168, "genres": ["Drama"], "poster_path": "/xSaazq8Am0eLjapiAcCXadXZaqZ.jpg", "poster_url": "https://image.tmdb.org/t/p/w500/xSaazq8Am0eLjapiAcCXadXZaqZ.jpg", "backdrop_path": "/fM0KgZqgd8o2uvDL46Xuq0ntPCY.jpg", "backdrop_url": "https://image.tmdb.org/t/p/w1280/fM0KgZqgd8o2uvDL46Xuq0ntPCY.jpg", "imdb_id": "tt0040866", "runtime": 160, "budget": 0, "revenue": 0}, "data_source": "Cinemateket", "source_file": "data/cinemateket_films_with_english_subs.json", "data_sources": ["Cinemateket"], "urls": ["https://www.filminstitutet.se/sv/se-och-samtala-om-film/cinemateket-stockholm/filmer/?filmId=5360&cityId=1"]}, {"film_id": "13961", "url": "https://www.filminstitutet.se/sv/se-och-samtala-om-film/cinemateket-stockholm/filmer/?filmId=13961&cityId=1", "title": "Originaltitel: So-seol-ga-ui yeong-hwa", "director": "", "showtimes": [{"datetime": "", "display_text": "l√∂r 6/12 kl. 18:30", "normalized_datetime": "2025-12-06T18:30:00", "normalized_date": "06.12", "normalized_time": "18:30", "source_cinema": "Cinemateket", "source_cinemas": ["Filmhuset - Bio Victor"], "source_url": "https://www.filminstitutet.se/sv/se-och-samtala-om-film/cinemateket-stockholm/filmer/?filmId=13961&cityId=1"}], "cinemas": ["Filmhuset - Bio Victor"], "scraped_at": "2025-12-02T06:26:41.276055", "tmdb": {"id": 928713, "title": "The Novelist's Film", "overview": "A novelist visits a bookstore run by a young colleague who's been out of touch, then takes a walk with a film director and his wife. She meets an actress and tries to convince her to make a film together.", "release_date": "2022-04-21", "rating": 6.6, "vote_count": 42, "genres": ["Drama"], "poster_path": "/5o4LNNBvc0kquSMaahjT2RTGFBR.jpg", "poster_url": "https://image.tmdb.org/t/p/w500/5o4LNNBvc0kquSMaahjT2RTGFBR.jpg", "backdrop_path": "/pAxhLwCuA5HuuMtnHu9SebB26M2.jpg", "backdrop_url": "https://image.tmdb.org/t/p/w1280/pAxhLwCuA5HuuMtnHu9SebB26M2.jpg", "imdb_id": "tt17146978", "runtime": 92, "budget": 71560, "revenue": 382227}, "data_source": "Cinemateket", "source_file": "data/cinemateket_films_with_english_subs.json", "data_sources": ["Cinemateket"], "urls": ["https://www.filminstitutet.se/sv/se-och-samtala-om-film/cinemateket-stockholm/filmer/?filmId=13961&cityId=1"]}, {"film_id": "13956", "url": "https://www.filminstitutet.se/sv/se-och-samtala-om-film/cinemateket-stockholm/filmer/?filmId=13956&cityId=1", "title": "Originaltitel: Bam gua nat", "director": "", "showtimes": [{"datetime": "", "display_text": "tis 9/12 kl. 18:00", "normalized_datetime": "2025-12-09T18:00:00", "normalized_date": "09.12", "normalized_time": "18:00", "source_cinema": "Cinemateket", "source_cinemas": ["Filmhuset - Bio Victor"], "source_url": "https://www.filminstitutet.se/sv/se-och-samtala-om-film/cinemateket-stockholm/filmer/?filmId=13956&cityId=1"}], "cinemas": ["Filmhuset - Bio Victor"], "scraped_at": "2025-12-02T06:26:52.802524", "tmdb": {"id": 57859, "title": "Night and Day", "overview": "Kim Seong-nam travels to Paris to escape an arrest, leaving his wife behind in Korea. After he arrives, he meets an ex-girlfriend and is introduced to a small community of Korean artists.", "release_date": "2008-02-28", "rating": 7.0, "vote_count": 40, "genres": ["Drama"], "poster_path": "/pHnVmDH4RFz5TIhpNcMZzdtFcoM.jpg", "poster_url": "https://image.tmdb.org/t/p/w500/pHnVmDH4RFz5TIhpNcMZzdtFcoM.jpg", "backdrop_path": "/qB2EGbOrxOrGCMdN7dbZKfFbFDG.jpg", "backdrop_url": "https://image.tmdb.org/t/p/w1280/qB2EGbOrxOrGCMdN7dbZKfFbFDG.jpg", "imdb_id": "tt1176096", "runtime": 144, "budget": 0, "revenue": 0}, "data_source": "Cinemateket", "source_file": "data/cinemateket_films_with_english_subs.json", "data_sources": ["Cinemateket"], "urls": ["https://www.filminstitutet.se/sv/se-och-samtala-om-film/cinemateket-stockholm/filmer/?filmId=13956&cityId=1"]}, {"film_id": "3832", "url": "https://www.filminstitutet.se/sv/se-och-samtala-om-film/cinemateket-stockholm/filmer/?filmId=3832&cityId=1", "title": "Originaltitel: Le notti bianche", "director": "", "showtimes": [{"datetime": "", "display_text": "ons 10/12 kl. 18:00", "normalized_datetime": "2025-12-10T18:00:00", "normalized_date": "10.12", "normalized_time": "18:00", "source_cinema": "Cinemateket", "source_cinemas": ["Filmhuset - Bio Victor"], "source_url": "https://www.filminstitutet.se/sv/se-och-samtala-om-film/cinemateket-stockholm/filmer/?filmId=3832&cityId=1"}], "cinemas": ["Filmhuset - Bio Victor"], "scraped_at": "2025-12-02T06:26:56.318862", "tmdb": {"id": 43231, "title": "Le Notti Bianche", "overview": "A middle-aged man meets a young woman who is waiting on a canal bridge for her lover's return.", "release_date": "1957-11-14", "rating": 7.446, "vote_count": 240, "genres": ["Drama", "Romance"], "poster_path": "/qWiI8U9lhSPR2ccMtNap5fh9zrk.jpg", "poster_url": "https://image.tmdb.org/t/p/w500/qWiI8U9lhSPR2ccMtNap5fh9zrk.jpg", "backdrop_path": "/2ijE67SW7xwy7hBb1mdsSOTdaxy.jpg", "backdrop_url": "https://image.tmdb.org/t/p/w1280/2ijE67SW7xwy7hBb1mdsSOTdaxy.jpg", "imdb_id": "tt0050782", "runtime": 101, "budget": 0, "revenue": 0}, "data_source": "Cinemateket", "source_file": "data/cinemateket_films_with_english_subs.json", "data_sources": ["Cinemateket"], "urls": ["https://www.filminstitutet.se/sv/se-och-samtala-om-film/cinemateket-stockholm/filmer/?filmId=3832&cityId=1"]}, {"film_id": "13916", "url": "https://www.filminstitutet.se/sv/se-och-samtala-om-film/cinemateket-stockholm/filmer/?filmId=13916&cityId=1", "title": "Originaltitel: After Work", "director": "", "showtimes": [{"datetime": "", "display_text": "s√∂n 14/12 kl. 14:00", "normalized_datetime": "2025-12-14T14:00:00", "normalized_date": "14.12", "normalized_time": "14:00", "source_cinema": "Cinemateket", "source_cinemas": ["Filmhuset - Bio Victor"], "source_url": "https://www.filminstitutet.se/sv/se-och-samtala-om-film/cinemateket-stockholm/filmer/?filmId=13916&cityId=1"}], "cinemas": ["Filmhuset - Bio Victor"], "scraped_at": "2025-12-02T06:27:07.460910", "tmdb": {"id": 1091360, "title": "After Work", "overview": "Kuwait‚Äôs constitution says that every person has the right to a job, so in some places 20 people are employed for one person‚Äôs job. In South Korea, they work so much that a policy has been introduced to turn off computers at the end of the day so that employees can‚Äôt work any more. In the US, they give up over 500 million holiday hours each year, while Amazon‚Äôs drivers are trying to form a union. Meanwhile, robots are poised to take over most jobs and put the rest of us out of work. Work is so crucial to our identity and what we spend our waking hours on that it is barely noticed anymore. A lot has happened since a group of Puritan priests invented the concept of work ethic in the 1600s, and in the 21st century the very concept of work is in many ways disintegrating. A perfect situation for a filmmaker like Swedish mastermind Erik Gandini, who travels the world to explore what the concept of work means today ‚Äì if it means anything at all.", "release_date": "2023-08-04", "rating": 6.2, "vote_count": 4, "genres": ["Documentary"], "poster_path": "/hICRG1PBNe1MBvpDfNNsznkwj1a.jpg", "poster_url": "https://image.tmdb.org/t/p/w500/hICRG1PBNe1MBvpDfNNsznkwj1a.jpg", "backdrop_path": "/67VhQB8AiWV1jQNevuhhrL5v2LV.jpg", "backdrop_url": "https://image.tmdb.org/t/p/w1280/67VhQB8AiWV1jQNevuhhrL5v2LV.jpg", "imdb_id": "tt10400026", "runtime": 81, "budget": 0, "revenue": 0}, "data_source": "Cinemateket", "source_file": "data/cinemateket_films_with_english_subs.json", "data_sources": ["Cinemateket"], "urls": ["https://www.filminstitutet.se/sv/se-och-samtala-om-film/cinemateket-stockholm/filmer/?filmId=13916&cityId=1"]}, {"film_id": "13910", "url": "https://www.filminstitutet.se/sv/se-och-samtala-om-film/cinemateket-stockholm/filmer/?filmId=13910&cityId=1", "title": "Originaltitel: Arbeiter verlassen die Fabrik / Schnittstelle / Der Ausdruck der H√§nde", "director": "", "showtimes": [{"datetime": "", "display_text": "s√∂n 14/12 kl. 16:00", "normalized_datetime": "2025-12-14T16:00:00", "normalized_date": "14.12", "normalized_time": "16:00", "source_cinema": "Cinemateket", "source_cinemas": ["Filmhuset - Bio Victor"], "source_url": "https://www.filminstitutet.se/sv/se-och-samtala-om-film/cinemateket-stockholm/filmer/?filmId=13910&cityId=1"}], "cinemas": ["Filmhuset - Bio Victor"], "scraped_at": "2025-12-02T06:27:10.853291", "data_source": "Cinemateket", "source_file": "data/cinemateket_films_with_english_subs.json", "data_sources": ["Cinemateket"], "urls": ["https://www.filminstitutet.se/sv/se-och-samtala-om-film/cinemateket-stockholm/filmer/?filmId=13910&cityId=1"]}, {"film_id": "fanny-och-alexander", "url": "https://www.biorio.se/movies/fanny-och-alexander", "title": "Fanny och Alexander", "director": "Ingmar Bergman", "showtimes": [{"datetime": "2025-12-14T09:30:00.000Z", "display_text": "Sunday December 14, 2025 at 09:30", "movie_id": "5700", "cinema_id": "10", "booking_url": "https://biorio.se/showtime/1241", "api_data": {"id": 1241, "movieId": 5700, "movieVersionId": 383, "startTime": "2025-12-14T09:30:00.000Z", "endTime": "2025-12-14T14:56:00.000Z", "screenId": 1, "screenNumber": 1, "language": null, "subtitles": null, "membersOnly": false, "screeningLive": true, "isArchived": false, "onlineAvailableFrom": null, "includeInReport": true, "movie": {"id": 5700, "title": "Fanny och Alexander", "posterurl": "https://rio.ams3.digitaloceanspaces.com/movies/movies/5700/posters/1761743405855-4lb86b.jpg", "movieVersions": [{"duration": 326, "audio": "Svenska", "subtitles": "Engelska"}], "subtitles": "Engelska", "audio": "Svenska"}, "MovieVersion": {"id": 383, "duration": 326, "subtitles": "Engelska", "audio": "Svenska"}, "screen": {"capacity": 180}, "TicketTypes": [{"id": 27, "name": "Fribiljett fr√•n distro"}, {"id": 25, "name": "Fanny & Alexander"}, {"id": 26, "name": "Diff. pris"}], "tags": ["reRUN", "Snowtime"], "ticketsSold": 57, "ticketsAvailable": 123, "isPublished": true}, "normalized_datetime": "2025-12-14T09:30:00", "normalized_date": "14.12", "normalized_time": "09:30", "source_cinema": "Bio Rio", "source_cinemas": ["Bio Rio Stockholm"], "source_url": "https://www.biorio.se/movies/fanny-och-alexander"}], "cinemas": ["Bio Rio Stockholm"], "scraped_at": "2025-12-02T06:24:49.666454", "source": "biorio", "tmdb": {"id": 5961, "title": "Fanny and Alexander", "overview": "As children in the loving Ekdahl family, Fanny and Alexander enjoy a happy life with their parents, who run a theater company. After their father dies unexpectedly, however, the siblings end up in a joyless home when their mother, Emilie, marries a stern bishop. The bleak situation gradually grows worse as the bishop becomes more controlling, but dedicated relatives make a valiant attempt to aid Emilie, Fanny and Alexander.", "release_date": "1982-12-17", "rating": 7.8, "vote_count": 835, "genres": ["Fantasy", "Drama", "Mystery"], "poster_path": "/q8jlA3Wc1Z987hNKRFA44g5OugC.jpg", "poster_url": "https://image.tmdb.org/t/p/w500/q8jlA3Wc1Z987hNKRFA44g5OugC.jpg", "backdrop_path": "/jVzoKlWUpsKV3y5oLafLQhEvgX6.jpg", "backdrop_url": "https://image.tmdb.org/t/p/w1280/jVzoKlWUpsKV3y5oLafLQhEvgX6.jpg", "imdb_id": "tt0083922", "runtime": 188, "budget": 6000000, "revenue": 6800000}, "data_source": "Bio Rio", "source_file": "data/biorio_films_with_english_subs.json", "data_sources": ["Bio Rio"], "urls": ["https://www.biorio.se/movies/fanny-och-alexander"]}, {"film_id": "the-doors-when-youre-strange", "url": "https://www.biorio.se/movies/the-doors-when-youre-strange", "title": "The Doors: When You‚Äôre Strange", "director": "Tom DiCillo", "showtimes": [{"datetime": "2025-12-06T17:30:00.000Z", "display_text": "Saturday December 06, 2025 at 17:30", "movie_id": "5688", "cinema_id": "10", "booking_url": "https://biorio.se/showtime/1275", "api_data": {"id": 1275, "movieId": 5688, "movieVersionId": 371, "startTime": "2025-12-06T17:30:00.000Z", "endTime": "2025-12-06T19:06:00.000Z", "screenId": 1, "screenNumber": 1, "language": null, "subtitles": null, "membersOnly": false, "screeningLive": true, "isArchived": false, "onlineAvailableFrom": null, "includeInReport": true, "movie": {"id": 5688, "title": "The Doors: When You‚Äôre Strange", "posterurl": "https://rio.ams3.digitaloceanspaces.com/movies/posters/1761299449571-400879890-1-%281%29.jpg", "movieVersions": [{"duration": 96, "audio": "Engelska", "subtitles": "Engelska"}], "subtitles": "Engelska", "audio": "Engelska"}, "MovieVersion": {"id": 371, "duration": 96, "subtitles": "Engelska", "audio": "Engelska"}, "screen": {"capacity": 180}, "TicketTypes": [{"id": 1, "name": "Ordinarie"}, {"id": 26, "name": "Diff. pris"}, {"id": 27, "name": "Fribiljett fr√•n distro"}], "tags": [], "ticketsSold": 37, "ticketsAvailable": 143, "isPublished": true}, "normalized_datetime": "2025-12-06T17:30:00", "normalized_date": "06.12", "normalized_time": "17:30", "source_cinema": "Bio Rio", "source_cinemas": ["Bio Rio Stockholm"], "source_url": "https://www.biorio.se/movies/the-doors-when-youre-strange"}, {"datetime": "2025-12-04T17:00:00.000Z", "display_text": "Thursday December 04, 2025 at 17:00", "movie_id": "5688", "cinema_id": "10", "booking_url": "https://biorio.se/showtime/1213", "api_data": {"id": 1213, "movieId": 5688, "movieVersionId": 371, "startTime": "2025-12-04T17:00:00.000Z", "endTime": "2025-12-04T18:36:00.000Z", "screenId": 1, "screenNumber": 1, "language": null, "subtitles": null, "membersOnly": false, "screeningLive": true, "isArchived": false, "onlineAvailableFrom": null, "includeInReport": true, "movie": {"id": 5688, "title": "The Doors: When You‚Äôre Strange", "posterurl": "https://rio.ams3.digitaloceanspaces.com/movies/posters/1761299449571-400879890-1-%281%29.jpg", "movieVersions": [{"duration": 96, "audio": "Engelska", "subtitles": "Engelska"}], "subtitles": "Engelska", "audio": "Engelska"}, "MovieVersion": {"id": 371, "duration": 96, "subtitles": "Engelska", "audio": "Engelska"}, "screen": {"capacity": 180}, "TicketTypes": [{"id": 1, "name": "Ordinarie"}, {"id": 26, "name": "Diff. pris"}, {"id": 27, "name": "Fribiljett fr√•n distro"}], "tags": [], "ticketsSold": 103, "ticketsAvailable": 77, "isPublished": true}, "normalized_datetime": "2025-12-04T17:00:00", "normalized_date": "04.12", "normalized_time": "17:00", "source_cinema": "Bio Rio", "source_cinemas": ["Bio Rio Stockholm"], "source_url": "https://www.biorio.se/movies/the-doors-when-youre-strange"}], "cinemas": ["Bio Rio Stockholm"], "scraped_at": "2025-12-02T06:24:54.501657", "source": "biorio", "tmdb": {"id": 37659, "title": "When You're Strange", "overview": "The creative chemistry of four brilliant artists ‚Äîdrummer John Densmore, guitarist Robby Kreiger, keyboardist Ray Manzarek and singer Jim Morrison‚Äî made The Doors one of America's most iconic and influential rock bands. Using footage shot between their formation in 1965 and Morrison's death in 1971, it follows the band from the corridors of UCLA's film school, where Manzarek and Morrison met, to the stages of sold-out arenas.", "release_date": "2010-04-09", "rating": 7.3, "vote_count": 219, "genres": ["Documentary", "Music"], "poster_path": "/yd5X8f1mt13ETAWLI7dp0MEEZLL.jpg", "poster_url": "https://image.tmdb.org/t/p/w500/yd5X8f1mt13ETAWLI7dp0MEEZLL.jpg", "backdrop_path": "/vP7V2cb4xNovVxblCWTychWtBN3.jpg", "backdrop_url": "https://image.tmdb.org/t/p/w1280/vP7V2cb4xNovVxblCWTychWtBN3.jpg", "imdb_id": "tt1333667", "runtime": 86, "budget": 0, "revenue": 0}, "data_source": "Bio Rio", "source_file": "data/biorio_films_with_english_subs.json", "data_sources": ["Bio Rio"], "urls": ["https://www.biorio.se/movies/the-doors-when-youre-strange"]}, {"film_id": "tokyo-godfathers", "url": "https://www.biorio.se/movies/tokyo-godfathers", "title": "Tokyo Godfathers", "director": "Satoshi Kon", "showtimes": [{"datetime": "2025-12-28T19:30:00.000Z", "display_text": "Sunday December 28, 2025 at 19:30", "movie_id": "5678", "cinema_id": "10", "booking_url": "https://biorio.se/showtime/1329", "api_data": {"id": 1329, "movieId": 5678, "movieVersionId": 361, "startTime": "2025-12-28T19:30:00.000Z", "endTime": "2025-12-28T21:02:00.000Z", "screenId": 1, "screenNumber": 1, "language": null, "subtitles": null, "membersOnly": false, "screeningLive": true, "isArchived": false, "onlineAvailableFrom": null, "includeInReport": true, "movie": {"id": 5678, "title": "Tokyo Godfathers", "posterurl": "https://rio.ams3.digitaloceanspaces.com/movies/movies/5678/posters/1760104162969-hsupo8.jpg", "movieVersions": [{"duration": 92, "audio": "Japanska", "subtitles": "Engelska"}], "subtitles": "Engelska", "audio": "Japanska"}, "MovieVersion": {"id": 361, "duration": 92, "subtitles": "Engelska", "audio": "Japanska"}, "screen": {"capacity": 180}, "TicketTypes": [{"id": 1, "name": "Ordinarie"}], "tags": ["reRUN", "Snowtime"], "ticketsSold": 14, "ticketsAvailable": 166, "isPublished": true}, "normalized_datetime": "2025-12-28T19:30:00", "normalized_date": "28.12", "normalized_time": "19:30", "source_cinema": "Bio Rio", "source_cinemas": ["Bio Rio Stockholm"], "source_url": "https://www.biorio.se/movies/tokyo-godfathers"}, {"datetime": "2025-12-18T17:00:00.000Z", "display_text": "Thursday December 18, 2025 at 17:00", "movie_id": "5678", "cinema_id": "10", "booking_url": "https://biorio.se/showtime/1219", "api_data": {"id": 1219, "movieId": 5678, "movieVersionId": 361, "startTime": "2025-12-18T17:00:00.000Z", "endTime": "2025-12-18T18:32:00.000Z", "screenId": 1, "screenNumber": 1, "language": null, "subtitles": null, "membersOnly": false, "screeningLive": true, "isArchived": false, "onlineAvailableFrom": null, "includeInReport": true, "movie": {"id": 5678, "title": "Tokyo Godfathers", "posterurl": "https://rio.ams3.digitaloceanspaces.com/movies/movies/5678/posters/1760104162969-hsupo8.jpg", "movieVersions": [{"duration": 92, "audio": "Japanska", "subtitles": "Engelska"}], "subtitles": "Engelska", "audio": "Japanska"}, "MovieVersion": {"id": 361, "duration": 92, "subtitles": "Engelska", "audio": "Japanska"}, "screen": {"capacity": 180}, "TicketTypes": [{"id": 1, "name": "Ordinarie"}, {"id": 26, "name": "Diff. pris"}, {"id": 27, "name": "Fribiljett fr√•n distro"}], "tags": ["reRUN", "Snowtime"], "ticketsSold": 106, "ticketsAvailable": 74, "isPublished": true}, "normalized_datetime": "2025-12-18T17:00:00", "normalized_date": "18.12", "normalized_time": "17:00", "source_cinema": "Bio Rio", "source_cinemas": ["Bio Rio Stockholm"], "source_url": "https://www.biorio.se/movies/tokyo-godfathers"}, {"datetime": "2025-12-03T17:00:00.000Z", "display_text": "Wednesday December 03, 2025 at 17:00", "movie_id": "5678", "cinema_id": "10", "booking_url": "https://biorio.se/showtime/1144", "api_data": {"id": 1144, "movieId": 5678, "movieVersionId": 361, "startTime": "2025-12-03T17:00:00.000Z", "endTime": "2025-12-03T18:32:00.000Z", "screenId": 1, "screenNumber": 1, "language": null, "subtitles": null, "membersOnly": false, "screeningLive": true, "isArchived": false, "onlineAvailableFrom": null, "includeInReport": true, "movie": {"id": 5678, "title": "Tokyo Godfathers", "posterurl": "https://rio.ams3.digitaloceanspaces.com/movies/movies/5678/posters/1760104162969-hsupo8.jpg", "movieVersions": [{"duration": 92, "audio": "Japanska", "subtitles": "Engelska"}], "subtitles": "Engelska", "audio": "Japanska"}, "MovieVersion": {"id": 361, "duration": 92, "subtitles": "Engelska", "audio": "Japanska"}, "screen": {"capacity": 180}, "TicketTypes": [{"id": 1, "name": "Ordinarie"}, {"id": 26, "name": "Diff. pris"}, {"id": 27, "name": "Fribiljett fr√•n distro"}], "tags": ["reRUN", "Snowtime"], "ticketsSold": 135, "ticketsAvailable": 45, "isPublished": true}, "normalized_datetime": "2025-12-03T17:00:00", "normalized_date": "03.12", "normalized_time": "17:00", "source_cinema": "Bio Rio", "source_cinemas": ["Bio Rio Stockholm"], "source_url": "https://www.biorio.se/movies/tokyo-godfathers"}], "cinemas": ["Bio Rio Stockholm"], "scraped_at": "2025-12-02T06:25:04.376491", "source": "biorio", "tmdb": {"id": 13398, "title": "Tokyo Godfathers", "overview": "On Christmas Eve, three homeless people living on the streets of Tokyo discover a newborn baby among the trash and set out to find its parents.", "release_date": "2003-12-05", "rating": 7.9, "vote_count": 1414, "genres": ["Animation", "Drama", "Comedy"], "poster_path": "/sPC66btzQlzuRdPKiSDYZ5Hvxgc.jpg", "poster_url": "https://image.tmdb.org/t/p/w500/sPC66btzQlzuRdPKiSDYZ5Hvxgc.jpg", "backdrop_path": "/mnppPdfdtKPNoRemzIZDwOKpgfv.jpg", "backdrop_url": "https://image.tmdb.org/t/p/w1280/mnppPdfdtKPNoRemzIZDwOKpgfv.jpg", "imdb_id": "tt0388473", "runtime": 92, "budget": 0, "revenue": 607735}, "data_source": "Bio Rio", "source_file": "data/biorio_films_with_english_subs.json", "data_sources": ["Bio Rio"], "urls": ["https://www.biorio.se/movies/tokyo-godfathers"]}, {"film_id": "in-bruges", "url": "https://biofagelbla.se/program/", "title": "In Bruges", "director": "Martin McDonagh", "duration": "1h 47 mins", "language": "Engelska", "showtimes": [{"datetime": "2025-12-07T10:30:00+01:00", "display_text": "S√∂ndag, 7th December 10:30", "time": "10:30", "date_section": "S√∂ndag, 7th December", "ticket_url": "https://biofagelbla.se/movie/in-bruges/?showtime=51178", "showtime_id": "51178", "normalized_datetime": "2025-12-07T10:30:00", "normalized_date": "07.12", "normalized_time": "10:30", "source_cinema": "Bio F√•gel Bl√•", "source_cinemas": ["Bio F√•gel Bl√• Stockholm"], "source_url": "https://biofagelbla.se/program/"}], "cinemas": ["Bio F√•gel Bl√• Stockholm"], "scraped_at": "2025-12-02T06:27:16.569090+00:00", "source": "fagelbla", "tmdb": {"id": 8321, "title": "In Bruges", "overview": "Ray and Ken, two hit men, are in Bruges, Belgium, waiting for their next mission. While they are there they have time to think and discuss their previous assignment. When the mission is revealed to Ken, it is not what he expected.", "release_date": "2008-02-08", "rating": 7.495, "vote_count": 5522, "genres": ["Comedy", "Drama", "Crime"], "poster_path": "/vz3Vd6nfq9YZrVvyYx5RHFaYKV3.jpg", "poster_url": "https://image.tmdb.org/t/p/w500/vz3Vd6nfq9YZrVvyYx5RHFaYKV3.jpg", "backdrop_path": "/dtGxDOcFssdUUTYBr6M6INXTI1e.jpg", "backdrop_url": "https://image.tmdb.org/t/p/w1280/dtGxDOcFssdUUTYBr6M6INXTI1e.jpg", "imdb_id": "tt0780536", "runtime": 108, "budget": 15000000, "revenue": 34533783}, "data_source": "Bio F√•gel Bl√•", "source_file": "data/fagelbla_films_with_english_subs.json", "data_sources": ["Bio F√•gel Bl√•"], "urls": ["https://biofagelbla.se/program/"]}, {"film_id": "fanny-och-alexander--theatrical-version", "url": "https://biofagelbla.se/program/", "title": "Fanny och Alexander ‚Äì Theatrical version", "director": "Ingmar Bergman", "duration": "3h 8 mins", "language": "Svensk", "showtimes": [{"datetime": "2025-12-07T15:30:00+01:00", "display_text": "S√∂ndag, 7th December 15:30", "time": "15:30", "date_section": "S√∂ndag, 7th December", "ticket_url": "https://biofagelbla.se/movie/fanny-och-alexander-theatrical-version/?showtime=48689", "showtime_id": "48689", "normalized_datetime": "2025-12-07T15:30:00", "normalized_date": "07.12", "normalized_time": "15:30", "source_cinema": "Bio F√•gel Bl√•", "source_cinemas": ["Bio F√•gel Bl√• Stockholm"], "source_url": "https://biofagelbla.se/program/"}, {"datetime": "2025-12-21T13:30:00+01:00", "display_text": "S√∂ndag, 21st December 13:30", "time": "13:30", "date_section": "S√∂ndag, 21st December", "ticket_url": "https://biofagelbla.se/movie/fanny-och-alexander-theatrical-version/?showtime=48739", "showtime_id": "48739", "normalized_datetime": "2025-12-21T13:30:00", "normalized_date": "21.12", "normalized_time": "13:30", "source_cinema": "Bio F√•gel Bl√•", "source_cinemas": ["Bio F√•gel Bl√• Stockholm"], "source_url": "https://biofagelbla.se/program/"}, {"datetime": "2025-12-22T19:30:00+01:00", "display_text": "M√•ndag, 22nd December 19:30", "time": "19:30", "date_section": "M√•ndag, 22nd December", "ticket_url": "https://biofagelbla.se/movie/fanny-och-alexander-theatrical-version/?showtime=48740", "showtime_id": "48740", "normalized_datetime": "2025-12-22T19:30:00", "normalized_date": "22.12", "normalized_time": "19:30", "source_cinema": "Bio F√•gel Bl√•", "source_cinemas": ["Bio F√•gel Bl√• Stockholm"], "source_url": "https://biofagelbla.se/program/"}], "cinemas": ["Bio F√•gel Bl√• Stockholm", "Bio F√•gel Bl√• Stockholm", "Bio F√•gel Bl√• Stockholm"], "scraped_at": "2025-12-02T06:27:16.569307+00:00", "source": "fagelbla", "data_source": "Bio F√•gel Bl√•", "source_file": "data/fagelbla_films_with_english_subs.json", "data_sources": ["Bio F√•gel Bl√•"], "urls": ["https://biofagelbla.se/program/"]}, {"film_id": "the-making-of-fanny-and-alexander", "url": "https://biofagelbla.se/program/", "title": "The Making of Fanny and Alexander", "director": "Ingmar Bergman", "duration": "1h 50 mins", "language": "Svensk", "showtimes": [{"datetime": "2025-12-08T17:45:00+01:00", "display_text": "M√•ndag, 8th December 17:45", "time": "17:45", "date_section": "M√•ndag, 8th December", "ticket_url": "https://biofagelbla.se/movie/the-making-of-fanny-and-alexander/?showtime=48741", "showtime_id": "48741", "normalized_datetime": "2025-12-08T17:45:00", "normalized_date": "08.12", "normalized_time": "17:45", "source_cinema": "Bio F√•gel Bl√•", "source_cinemas": ["Bio F√•gel Bl√• Stockholm"], "source_url": "https://biofagelbla.se/program/"}], "cinemas": ["Bio F√•gel Bl√• Stockholm"], "scraped_at": "2025-12-02T06:27:16.569531+00:00", "source": "fagelbla", "tmdb": {"id": 114034, "title": "The Making of Fanny and Alexander", "overview": "The Making of Fanny and Alexander is a fascinating look at the creation of a masterpiece. Directed by Ingmar Bergman himself, this feature-length documentary chronicles the methods of one of cinema‚Äôs true luminaries as he labors to realize his crowning production.", "release_date": "1984-09-16", "rating": 6.8, "vote_count": 18, "genres": ["Documentary"], "poster_path": "/dz9VDnqUsZ48APUuG5QuKOjy10Q.jpg", "poster_url": "https://image.tmdb.org/t/p/w500/dz9VDnqUsZ48APUuG5QuKOjy10Q.jpg", "backdrop_path": "/pEvQ6DAVo3LLZ7UaZpDJLYUvgEc.jpg", "backdrop_url": "https://image.tmdb.org/t/p/w1280/pEvQ6DAVo3LLZ7UaZpDJLYUvgEc.jpg", "imdb_id": "tt0090955", "runtime": 110, "budget": 0, "revenue": 0}, "data_source": "Bio F√•gel Bl√•", "source_file": "data/fagelbla_films_with_english_subs.json", "data_sources": ["Bio F√•gel Bl√•"], "urls": ["https://biofagelbla.se/program/"]}, {"film_id": "mannen-fr√•n-mallorca", "url": "https://biofagelbla.se/program/", "title": "Mannen fr√•n Mallorca", "director": "Bo Widerberg", "duration": "1h 42 mins", "language": "Svensk", "showtimes": [{"datetime": "2025-12-13T15:00:00+01:00", "display_text": "L√∂rdag, 13th December 15:00", "time": "15:00", "date_section": "L√∂rdag, 13th December", "ticket_url": "https://biofagelbla.se/movie/mannen-fran-mallorca/?showtime=48672", "showtime_id": "48672", "normalized_datetime": "2025-12-13T15:00:00", "normalized_date": "13.12", "normalized_time": "15:00", "source_cinema": "Bio F√•gel Bl√•", "source_cinemas": ["Bio F√•gel Bl√• Stockholm"], "source_url": "https://biofagelbla.se/program/"}], "cinemas": ["Bio F√•gel Bl√• Stockholm"], "scraped_at": "2025-12-02T06:27:16.569989+00:00", "source": "fagelbla", "tmdb": {"id": 52331, "title": "The Man from Majorca", "overview": "In the aftermath of a daring post office robbery on Saint Lucy's Day, two Stockholm vice cops venture into a world of corruption, cover-ups and murder that takes them from the dirty streets to government officials.", "release_date": "1984-10-12", "rating": 6.444, "vote_count": 45, "genres": ["Thriller", "Crime", "Action"], "poster_path": "/sHlJJd4dGYo7OPJumDkPON8yt7W.jpg", "poster_url": "https://image.tmdb.org/t/p/w500/sHlJJd4dGYo7OPJumDkPON8yt7W.jpg", "backdrop_path": "/aaxOd39HAp9UyZBBIbtWWd1LUp.jpg", "backdrop_url": "https://image.tmdb.org/t/p/w1280/aaxOd39HAp9UyZBBIbtWWd1LUp.jpg", "imdb_id": "tt0087677", "runtime": 107, "budget": 58960, "revenue": 1769000}, "data_source": "Bio F√•gel Bl√•", "source_file": "data/fagelbla_films_with_english_subs.json", "data_sources": ["Bio F√•gel Bl√•"], "urls": ["https://biofagelbla.se/program/"]}, {"film_id": "fanny-och-alexander--complete-version", "url": "https://biofagelbla.se/program/", "title": "Fanny och Alexander ‚Äì Complete version", "director": "Ingmar Bergman", "duration": "5h 12 mins", "language": "Svensk", "showtimes": [{"datetime": "2025-12-14T10:00:00+01:00", "display_text": "S√∂ndag, 14th December 10:00", "time": "10:00", "date_section": "S√∂ndag, 14th December", "ticket_url": "https://biofagelbla.se/movie/fanny-och-alexander/?showtime=51128", "showtime_id": "51128", "normalized_datetime": "2025-12-14T10:00:00", "normalized_date": "14.12", "normalized_time": "10:00", "source_cinema": "Bio F√•gel Bl√•", "source_cinemas": ["Bio F√•gel Bl√• Stockholm"], "source_url": "https://biofagelbla.se/program/"}], "cinemas": ["Bio F√•gel Bl√• Stockholm"], "scraped_at": "2025-12-02T06:27:16.570164+00:00", "source": "fagelbla", "data_source": "Bio F√•gel Bl√•", "source_file": "data/fagelbla_films_with_english_subs.json", "data_sources": ["Bio F√•gel Bl√•"], "urls": ["https://biofagelbla.se/program/"]}, {"film_id": "nattvardsg√§sterna", "url": "https://biofagelbla.se/program/", "title": "Nattvardsg√§sterna", "director": "Ingmar Bergman", "duration": "1h 21 mins", "language": "Svensk", "showtimes": [{"datetime": "2025-12-15T17:45:00+01:00", "display_text": "M√•ndag, 15th December 17:45", "time": "17:45", "date_section": "M√•ndag, 15th December", "ticket_url": "https://biofagelbla.se/movie/nattvardsgasterna/?showtime=51905", "showtime_id": "51905", "normalized_datetime": "2025-12-15T17:45:00", "normalized_date": "15.12", "normalized_time": "17:45", "source_cinema": "Bio F√•gel Bl√•", "source_cinemas": ["Bio F√•gel Bl√• Stockholm"], "source_url": "https://biofagelbla.se/program/"}], "cinemas": ["Bio F√•gel Bl√• Stockholm"], "scraped_at": "2025-12-02T06:27:16.570332+00:00", "source": "fagelbla", "tmdb": {"id": 29455, "title": "Winter Light", "overview": "A Swedish pastor fails a loving woman, a suicidal fisherman and God.", "release_date": "1963-02-11", "rating": 7.9, "vote_count": 482, "genres": ["Drama"], "poster_path": "/wDxrEssdjFWYwIZLbr06RQNcg1q.jpg", "poster_url": "https://image.tmdb.org/t/p/w500/wDxrEssdjFWYwIZLbr06RQNcg1q.jpg", "backdrop_path": "/tis6nrWakUsuG6Jwdm4yESfTU0o.jpg", "backdrop_url": "https://image.tmdb.org/t/p/w1280/tis6nrWakUsuG6Jwdm4yESfTU0o.jpg", "imdb_id": "tt0057358", "runtime": 80, "budget": 0, "revenue": 0}, "data_source": "Bio F√•gel Bl√•", "source_file": "data/fagelbla_films_with_english_subs.json", "data_sources": ["Bio F√•gel Bl√•"], "urls": ["https://biofagelbla.se/program/"]}, {"film_id": "die-hard", "url": "https://biofagelbla.se/program/", "title": "Die Hard", "director": "John McTiernan, Marion Tumen", "duration": "2h 12 mins", "language": "Engelska", "showtimes": [{"datetime": "2025-12-19T20:00:00+01:00", "display_text": "Fredag, 19th December 20:00", "time": "20:00", "date_section": "Fredag, 19th December", "ticket_url": "https://biofagelbla.se/movie/die-hard/?showtime=48742", "showtime_id": "48742", "normalized_datetime": "2025-12-19T20:00:00", "normalized_date": "19.12", "normalized_time": "20:00", "source_cinema": "Bio F√•gel Bl√•", "source_cinemas": ["Bio F√•gel Bl√• Stockholm"], "source_url": "https://biofagelbla.se/program/"}], "cinemas": ["Bio F√•gel Bl√• Stockholm"], "scraped_at": "2025-12-02T06:27:16.570768+00:00", "source": "fagelbla", "tmdb": {"id": 562, "title": "Die Hard", "overview": "NYPD cop John McClane's plan to reconcile with his estranged wife is thrown for a serious loop when, minutes after he arrives at her offices Christmas Party, the entire building is overtaken by a group of terrorists. With little help from the LAPD, wisecracking McClane sets out to single-handedly rescue the hostages and bring the bad guys down.", "release_date": "1988-07-15", "rating": 7.803, "vote_count": 11803, "genres": ["Action", "Thriller"], "poster_path": "/aJCpHDC6RoGz7d1Fzayl019xnxX.jpg", "poster_url": "https://image.tmdb.org/t/p/w500/aJCpHDC6RoGz7d1Fzayl019xnxX.jpg", "backdrop_path": "/rahJyvdMruvqUmSLWRQKYS57mx8.jpg", "backdrop_url": "https://image.tmdb.org/t/p/w1280/rahJyvdMruvqUmSLWRQKYS57mx8.jpg", "imdb_id": "tt0095016", "runtime": 132, "budget": 28000000, "revenue": 140767956}, "data_source": "Bio F√•gel Bl√•", "source_file": "data/fagelbla_films_with_english_subs.json", "data_sources": ["Bio F√•gel Bl√•"], "urls": ["https://biofagelbla.se/program/"]}, {"film_id": "its-a-wonderful-life", "url": "https://biofagelbla.se/program/", "title": "It‚Äôs a Wonderful Life", "director": "Frank Capra", "duration": "2h 11 mins", "language": "Engelska", "showtimes": [{"datetime": "2025-12-21T10:30:00+01:00", "display_text": "S√∂ndag, 21st December 10:30", "time": "10:30", "date_section": "S√∂ndag, 21st December", "ticket_url": "https://biofagelbla.se/movie/its-a-wonderful-life/?showtime=48738", "showtime_id": "48738", "normalized_datetime": "2025-12-21T10:30:00", "normalized_date": "21.12", "normalized_time": "10:30", "source_cinema": "Bio F√•gel Bl√•", "source_cinemas": ["Bio F√•gel Bl√• Stockholm"], "source_url": "https://biofagelbla.se/program/"}], "cinemas": ["Bio F√•gel Bl√• Stockholm"], "scraped_at": "2025-12-02T06:27:16.571100+00:00", "source": "fagelbla", "tmdb": {"id": 1585, "title": "It's a Wonderful Life", "overview": "A holiday favourite for generations...  George Bailey has spent his entire life giving to the people of Bedford Falls.  All that prevents rich skinflint Mr. Potter from taking over the entire town is George's modest building and loan company.  But on Christmas Eve the business's $8,000 is lost and George's troubles begin.", "release_date": "1946-12-20", "rating": 8.3, "vote_count": 4658, "genres": ["Drama", "Family", "Fantasy"], "poster_path": "/bSqt9rhDZx1Q7UZ86dBPKdNomp2.jpg", "poster_url": "https://image.tmdb.org/t/p/w500/bSqt9rhDZx1Q7UZ86dBPKdNomp2.jpg", "backdrop_path": "/ch3lDc4xQ9MpsNEpnRhvR8PIxxK.jpg", "backdrop_url": "https://image.tmdb.org/t/p/w1280/ch3lDc4xQ9MpsNEpnRhvR8PIxxK.jpg", "imdb_id": "tt0038650", "runtime": 130, "budget": 3180000, "revenue": 9644124}, "data_source": "Bio F√•gel Bl√•", "source_file": "data/fagelbla_films_with_english_subs.json", "data_sources": ["Bio F√•gel Bl√•"], "urls": ["https://biofagelbla.se/program/"]}, {"film_id": "breakfast-at-tiffanys", "url": "https://biofagelbla.se/program/", "title": "Breakfast at Tiffany‚Äôs", "director": "Blake Edwards", "duration": "1h 55 mins", "language": "Engelska", "showtimes": [{"datetime": "2025-12-27T10:30:00+01:00", "display_text": "L√∂rdag, 27th December 10:30", "time": "10:30", "date_section": "L√∂rdag, 27th December", "ticket_url": "https://biofagelbla.se/movie/breakfast-at-tiffanys/?showtime=51280", "showtime_id": "51280", "normalized_datetime": "2025-12-27T10:30:00", "normalized_date": "27.12", "normalized_time": "10:30", "source_cinema": "Bio F√•gel Bl√•", "source_cinemas": ["Bio F√•gel Bl√• Stockholm"], "source_url": "https://biofagelbla.se/program/"}, {"datetime": "2026-01-17T10:30:00+01:00", "display_text": "L√∂rdag, 17th Januari 10:30", "time": "10:30", "date_section": "L√∂rdag, 17th Januari", "ticket_url": "https://biofagelbla.se/movie/breakfast-at-tiffanys/?showtime=51894", "showtime_id": "51894", "normalized_datetime": "2026-01-17T10:30:00", "normalized_date": "17.01.2026", "normalized_time": "10:30", "source_cinema": "Bio F√•gel Bl√•", "source_cinemas": ["Bio F√•gel Bl√• Stockholm"], "source_url": "https://biofagelbla.se/program/"}], "cinemas": ["Bio F√•gel Bl√• Stockholm", "Bio F√•gel Bl√• Stockholm"], "scraped_at": "2025-12-02T06:27:16.571546+00:00", "source": "fagelbla", "tmdb": {"id": 164, "title": "Breakfast at Tiffany's", "overview": "Holly Golightly is an eccentric New York City playgirl determined to marry a Brazilian millionaire. But when young writer Paul Varjak moves into her apartment building, her past threatens to get in their way.", "release_date": "1961-10-06", "rating": 7.63, "vote_count": 4369, "genres": ["Comedy", "Romance", "Drama"], "poster_path": "/79xm4gXw4l7A5D0XukUOJRocFYQ.jpg", "poster_url": "https://image.tmdb.org/t/p/w500/79xm4gXw4l7A5D0XukUOJRocFYQ.jpg", "backdrop_path": "/jXZ2tyJl44yKvh22I6ooQwU5rFM.jpg", "backdrop_url": "https://image.tmdb.org/t/p/w1280/jXZ2tyJl44yKvh22I6ooQwU5rFM.jpg", "imdb_id": "tt0054698", "runtime": 115, "budget": 2500000, "revenue": 9500000}, "data_source": "Bio F√•gel Bl√•", "source_file": "data/fagelbla_films_with_english_subs.json", "data_sources": ["Bio F√•gel Bl√•"], "urls": ["https://biofagelbla.se/program/"]}, {"film_id": "sista-vittnet", "url": "https://zita.se/sista-vittnet", "title": "Sista vittnet", "director": "", "genre": "The Parallax ViewUSA19741 jan 1974102 minPolitisk thrillerFr√•n 15 √•rFolkets Bio StockholmEngelskaEngelska", "duration": "", "showtimes": [{"datetime": "", "display_text": "20:00", "time": "20:00", "date": "", "cinema": "(Zita 1)", "source_url": "https://zita.se/sista-vittnet", "normalized_datetime": "2025-12-02T20:00:00", "normalized_date": "02.12", "normalized_time": "20:00", "source_cinema": "Zita Folkets Bio", "source_cinemas": ["Zita Folkets Bio Stockholm"]}], "cinemas": ["Zita Folkets Bio Stockholm"], "scraped_at": "2025-12-01T06:27:36.800492+00:00", "source": "zita", "tmdb": {"id": 137190, "title": "Beck 16 - The Last Witness", "overview": "A series of grisly murders where the victims faces have been removed by acid starts to turn up around Stockholm. Detective Martin Beck and Gunvald Larsson are once again drawn into the darkness.", "release_date": "2002-04-17", "rating": 6.5, "vote_count": 30, "genres": ["Crime", "Drama", "Mystery", "Thriller"], "poster_path": "/o4SoVGex5KMgI6fC9UhfIbPguWQ.jpg", "poster_url": "https://image.tmdb.org/t/p/w500/o4SoVGex5KMgI6fC9UhfIbPguWQ.jpg", "backdrop_path": "/uFWAUliquPGCRyxxaYNm6Sc7QzY.jpg", "backdrop_url": "https://image.tmdb.org/t/p/w1280/uFWAUliquPGCRyxxaYNm6Sc7QzY.jpg", "imdb_id": "tt0303727", "runtime": 105, "budget": 0, "revenue": 0}, "data_source": "Zita Folkets Bio", "source_file": "data/zita_films_with_english_subs.json", "data_sources": ["Zita Folkets Bio"], "urls": ["https://zita.se/sista-vittnet"]}]</script>
    <script>
// Global variables
let allFilms = [];
let filteredFilms = [];
let cinemas = new Set();
let genres = new Set();

// Simplified DateTime parsing using normalized data
function parseDateTime(showtime) {
    // Use normalized_datetime if available (preferred)
    if (showtime.normalized_datetime) {
        try {
            return new Date(showtime.normalized_datetime);
        } catch (e) {
            console.warn('Could not parse normalized_datetime:', showtime.normalized_datetime, e);
        }
    }
    
    // Fallback to original datetime field
    if (showtime.datetime) {
        try {
            return new Date(showtime.datetime);
        } catch (e) {
            console.warn('Could not parse datetime:', showtime.datetime, e);
        }
    }
    
    return null;
}

function getSortedShowtimes(showtimes) {
    if (!showtimes || !Array.isArray(showtimes)) return [];
    
    return [...showtimes].sort((a, b) => {
        const dateA = parseDateTime(a);
        const dateB = parseDateTime(b);
        
        // If either date couldn't be parsed, keep original order
        if (!dateA && !dateB) return 0;
        if (!dateA) return 1;
        if (!dateB) return -1;
        
        return dateA - dateB;
    });
}

function formatShowtime(showtime) {
    // Use normalized data if available (much simpler!)
    if (showtime.normalized_datetime && showtime.normalized_date && showtime.normalized_time) {
        const parsedDate = new Date(showtime.normalized_datetime);
        
        // Validate the normalized date
        if (!isNaN(parsedDate.getTime())) {
            return {
                display: showtime.normalized_time,
                date: showtime.normalized_date,
                time: showtime.normalized_time,
                fullDate: parsedDate
            };
        }
    }
    
    // Fallback to legacy parsing if normalized data is not available
    const parsedDate = parseDateTime(showtime);
    
    if (!parsedDate || isNaN(parsedDate.getTime())) {
        // Final fallback to original display
        return {
            display: showtime.display_text || showtime.datetime || 'TBA',
            date: '',
            time: '',
            fullDate: null
        };
    }
    
    const now = new Date();
    
    // Format time
    const timeOptions = { hour: '2-digit', minute: '2-digit', hour12: false };
    const timeStr = parsedDate.toLocaleTimeString('en-GB', timeOptions);
    
    // Format date - always use numeric format
    const day = String(parsedDate.getDate()).padStart(2, '0');
    const month = String(parsedDate.getMonth() + 1).padStart(2, '0');
    let dateStr = `${day}.${month}`;
    
    // Add year if not current year
    if (parsedDate.getFullYear() !== now.getFullYear()) {
        dateStr += `.${parsedDate.getFullYear()}`;
    }
    
    return {
        display: timeStr,
        date: dateStr,
        time: timeStr,
        fullDate: parsedDate
    };
}

// Generate Google Calendar URL for a film showtime
function createGoogleCalendarUrl(film, showtime, formattedDateTime) {
    if (!formattedDateTime.fullDate) {
        return null;
    }
    
    const startDate = new Date(formattedDateTime.fullDate);
    
    // Check if the date is valid
    if (isNaN(startDate.getTime())) {
        console.warn('Invalid date for calendar URL:', formattedDateTime.fullDate);
        return null;
    }
    
    // Assume 2-hour duration for films (default)
    const endDate = new Date(startDate.getTime() + (2 * 60 * 60 * 1000));
    
    // Format dates for Google Calendar (YYYYMMDDTHHMMSSZ)
    const formatGoogleDate = (date) => {
        try {
            return date.toISOString().replace(/[-:.]/g, '').replace(/000Z$/, 'Z');
        } catch (error) {
            console.warn('Error formatting date for Google Calendar:', date, error);
            return null;
        }
    };
    
    const startDateFormatted = formatGoogleDate(startDate);
    const endDateFormatted = formatGoogleDate(endDate);
    
    // If date formatting failed, return null
    if (!startDateFormatted || !endDateFormatted) {
        return null;
    }
    
    // Don't use encodeURIComponent here since URLSearchParams will handle encoding
    const title = `üçø ${film.tmdb?.title || film.title}`;
    const cinemaName = cleanCinemaName(showtime.source_cinema || film.data_source || 'Stockholm Cinema');
    const details = [
        `Film: ${film.tmdb?.title || film.title}`,
        film.tmdb?.overview ? `Description: ${film.tmdb.overview}` : '',
        film.tmdb?.directors?.length > 0 ? `Director: ${film.tmdb.directors.join(', ')}` : '',
        film.tmdb?.genres?.length > 0 ? `Genres: ${film.tmdb.genres.join(', ')}` : '',
        film.tmdb?.rating ? `Rating: ‚≠ê ${film.tmdb.rating}/10` : '',
        '',
        `Cinema: ${cinemaName}`,
        `Ticket URL: ${getShowtimeUrl(film, showtime)}`
    ].filter(line => line.trim()).join('\n');
    
    const location = cinemaName;
    
    const baseUrl = 'https://calendar.google.com/calendar/render';
    const params = new URLSearchParams({
        action: 'TEMPLATE',
        text: title,
        dates: `${startDateFormatted}/${endDateFormatted}`,
        details: details,
        location: location
    });
    
    return `${baseUrl}?${params.toString()}`;
}

// Helper function to clean cinema names (remove "Bio" prefix)
function cleanCinemaName(cinemaName) {
    if (!cinemaName) return '';
    
    // Remove "Bio " prefix (case insensitive)
    return cinemaName.replace(/^Bio\s+/i, '').trim();
}

// Helper function to get the appropriate URL for a showtime
function getShowtimeUrl(film, showtime) {
    // Get the appropriate URL for this showtime's cinema
    let showtimeUrl = film.url; // default fallback
    const cinemaInfo = showtime.source_cinema || showtime.source_cinemas?.[0] || '';
    
    if (film.urls && film.data_sources && cinemaInfo) {
        const cinemaIndex = film.data_sources.findIndex(source => 
            source.toLowerCase().includes(cinemaInfo.toLowerCase()) ||
            cinemaInfo.toLowerCase().includes(source.toLowerCase())
        );
        if (cinemaIndex >= 0 && film.urls[cinemaIndex]) {
            showtimeUrl = film.urls[cinemaIndex];
        }
    } else if (showtime.source_url) {
        showtimeUrl = showtime.source_url;
    }
    
    return showtimeUrl;
}

// DOM elements
const filmsGrid = document.getElementById('films-grid');
const loading = document.getElementById('loading');
const noResults = document.getElementById('no-results');

const searchInput = document.getElementById('search-input');
const cinemaFilter = document.getElementById('cinema-filter');
const genreFilter = document.getElementById('genre-filter');
const totalFilmsEl = document.getElementById('total-films');
const totalCinemasEl = document.getElementById('total-cinemas');
const totalShowtimesEl = document.getElementById('total-showtimes');

// Initialize the app
// Initialize the app
document.addEventListener('DOMContentLoaded', () => {
    loadFilms();
});

// Configuration for data sources
const DATA_SOURCES = [
    {
        name: 'Cinemateket Stockholm',
        file: './cinemateket_films_with_english_subs.json',
        fallback: './films_with_english_subs.json'
    },
    {
        name: 'Bio Rio Stockholm',
        file: './biorio_films_with_english_subs.json',
        fallback: null
    },
    {
        name: 'Bio F√•gel Bl√• Stockholm',
        file: './fagelbla_films_with_english_subs.json',
        fallback: null
    },
    {
        name: 'Zita Folkets Bio Stockholm',
        file: './zita_films_with_english_subs.json',
        fallback: null
    }
];

// Load films from multiple JSON files
// Load films from embedded JSON data
async function loadFilms() {
    try {
        // Get embedded JSON data
        const filmsDataElement = document.getElementById('films-data');
        allFilms = JSON.parse(filmsDataElement.textContent);
        
        filteredFilms = [...allFilms];
        
        console.log(`üéâ Successfully loaded ${allFilms.length} films from embedded data`);
        
        // Extract unique cinemas and genres
        allFilms.forEach(film => {
            film.cinemas?.forEach(cinema => {
                if (typeof cinema === 'string') {
                    cinemas.add(cinema);
                } else if (cinema?.name) {
                    cinemas.add(cinema.name);
                }
            });
            film.tmdb?.genres?.forEach(genre => genres.add(genre));
        });
        
        loading.style.display = 'none';
        
        // Initialize display after loading data
        setupEventListeners();
        displayFilms(allFilms);
        updateStats();
        populateFilters();
    } catch (error) {
        console.error('Error loading films:', error);
        loading.innerHTML = `
            <i class="fas fa-exclamation-triangle"></i>
            <span>Error loading films. Please try again later.</span>
        `;
    }
}



// Setup event listeners for filters
function setupEventListeners() {
    searchInput.addEventListener('input', debounce(filterFilms, 300));
    cinemaFilter.addEventListener('change', filterFilms);
    genreFilter.addEventListener('change', filterFilms);
}

// Debounce function for search input
function debounce(func, wait) {
    let timeout;
    return function executedFunction(...args) {
        const later = () => {
            clearTimeout(timeout);
            func(...args);
        };
        clearTimeout(timeout);
        timeout = setTimeout(later, wait);
    };
}

// Filter films based on search and criteria
function filterFilms() {
    const searchTerm = searchInput.value.toLowerCase();
    const selectedCinema = cinemaFilter.value;
    const selectedGenre = genreFilter.value;
    
    filteredFilms = allFilms.filter(film => {
        // Search filter
        const searchMatch = !searchTerm || 
            film.title?.toLowerCase().includes(searchTerm) ||
            film.tmdb?.title?.toLowerCase().includes(searchTerm) ||
            film.tmdb?.overview?.toLowerCase().includes(searchTerm) ||
            film.tmdb?.directors?.some(dir => dir.toLowerCase().includes(searchTerm)) ||
            film.tmdb?.genres?.some(genre => genre.toLowerCase().includes(searchTerm));
        
        // Cinema filter
        const cinemaMatch = !selectedCinema || 
            film.cinemas?.some(cinema => {
                if (typeof cinema === 'string') {
                    return cinema === selectedCinema;
                } else if (cinema?.name) {
                    return cinema.name === selectedCinema;
                }
                return false;
            });
        
        // Genre filter
        const genreMatch = !selectedGenre || 
            film.tmdb?.genres?.includes(selectedGenre);
        
        return searchMatch && cinemaMatch && genreMatch;
    });
    
    displayFilms(filteredFilms);
}

// Get the earliest showtime date for a film
function getEarliestShowtime(film) {
    if (!film.showtimes || film.showtimes.length === 0) {
        return new Date('2099-12-31'); // Far future date for films without showtimes
    }
    
    const sortedShowtimes = getSortedShowtimes(film.showtimes);
    const earliestShowtime = sortedShowtimes[0];
    const parsedDate = parseDateTime(earliestShowtime);
    
    return parsedDate || new Date('2099-12-31');
}

// Display films in the grid
function displayFilms(films) {
    if (films.length === 0) {
        filmsGrid.style.display = 'none';
        noResults.style.display = 'block';
        return;
    }
    
    filmsGrid.style.display = 'grid';
    noResults.style.display = 'none';
    
    // Sort films by their earliest showtime
    const sortedFilms = [...films].sort((a, b) => {
        const dateA = getEarliestShowtime(a);
        const dateB = getEarliestShowtime(b);
        return dateA - dateB;
    });
    
    filmsGrid.innerHTML = sortedFilms.map(film => createFilmCard(film)).join('');
}

// Create HTML for a film card
function createFilmCard(film) {
    const tmdb = film.tmdb || {};
    const fullTitle = tmdb.title || film.title || 'Untitled';
    const title = fullTitle.length > 20 ? fullTitle.substring(0, 20) + '...' : fullTitle;
    const overview = tmdb.overview || extractOverviewFromDetails(film.original_details) || 'No description available.';
    const rating = tmdb.rating ? tmdb.rating.toFixed(1) : null;
            const genres = tmdb.genres?.slice(0, 2) || [];
    const year = tmdb.release_date ? new Date(tmdb.release_date).getFullYear() : '';
    const runtime = tmdb.runtime ? `${tmdb.runtime} min` : '';
    const posterUrl = tmdb.poster_url || '';
    const directors = tmdb.directors?.slice(0, 2) || [];
    
    return `
        <div class="film-card">
            <div class="film-poster">
                ${posterUrl ? 
                    `<img src="${posterUrl}" alt="${title}" loading="lazy">` : 
                    `<div class="placeholder"><i class="fas fa-film"></i></div>`
                }
                ${rating ? `
                    <div class="film-rating">
                        <span class="star">‚òÖ</span>
                        <span>${rating}</span>
                    </div>
                ` : ''}
            </div>
            <div class="film-content">
                <h3 class="film-title">${title}</h3>
                <p class="film-overview">${overview}</p>
                
                <div class="film-meta">
                    ${year ? `<span class="meta-item year">${year}</span>` : ''}
                    ${genres.map(genre => `<span class="meta-item genre">${genre}</span>`).join('')}
                    ${directors.length > 0 ? `<span class="meta-item">üìΩÔ∏è ${directors.join(', ')}</span>` : ''}
                    ${film.data_sources && film.data_sources.length > 1 ? 
                        film.data_sources.map(source => `<span class="meta-item source multi-cinema"> ${source}</span>`).join('') :
                        film.data_source ? `<span class="meta-item source"> ${film.data_source}</span>` : ''
                    }
                </div>
                
                ${film.showtimes?.length > 0 ? `
                    <div class="film-showtimes">
                        <div class="showtimes-title">
                            <i class="fas fa-clock"></i>
                            Showtimes
                        </div>
                        ${getSortedShowtimes(film.showtimes).slice(0, 5).map(showtime => {
                        const formattedDateTime = formatShowtime(showtime);
                        const rawCinemaInfo = showtime.source_cinema || showtime.source_cinemas?.[0] || '';
                        const cleanedCinemaInfo = cleanCinemaName(rawCinemaInfo);
                        const showtimeUrl = getShowtimeUrl(film, showtime);
                        const calendarUrl = createGoogleCalendarUrl(film, showtime, formattedDateTime);
                        
                        return `
                        <div class="showtime-container">
                            <a href="${showtimeUrl}" target="_blank" class="showtime-link">
                                <div class="showtime ${film.data_sources && film.data_sources.length > 1 ? 'multi-cinema' : ''}">
                                    <div class="showtime-time">${formattedDateTime.date} ${formattedDateTime.display}${cleanedCinemaInfo ? ` <span class="cinema-name">${cleanedCinemaInfo}</span>` : ''}</div>
                                    <div class="showtime-arrow">‚Üí</div>
                                </div>
                            </a>
                            ${calendarUrl ? `
                                <a href="${calendarUrl}" target="_blank" class="calendar-button" title="Add to Google Calendar">
                                    <i class="fas fa-calendar-plus"></i>
                                </a>
                            ` : ''}
                        </div>`;
                    }).join('')}
                    ${film.showtimes.length > 5 ? `<div class="more-showtimes">+${film.showtimes.length - 5} more showtimes...</div>` : ''}
                    </div>
                ` : ''}
                

            </div>
        </div>
    `;
}

// Extract overview from original details (fallback)
function extractOverviewFromDetails(details) {
    if (!details) return '';
    
    // Remove HTML tags and extra whitespace
    const cleanText = details.replace(/<[^>]*>/g, '').replace(/\s+/g, ' ').trim();
    
    // Get first meaningful paragraph (minimum 50 characters)
    const sentences = cleanText.split('. ');
    let overview = '';
    for (const sentence of sentences) {
        overview += sentence + '. ';
        if (overview.length > 100) break;
    }
    
    return overview.trim().substring(0, 200) + (overview.length > 200 ? '...' : '');
}

// Update statistics
function updateStats() {
    totalFilmsEl.textContent = allFilms.length;
    totalCinemasEl.textContent = cinemas.size;
    
    const totalShowtimes = allFilms.reduce((total, film) => {
        return total + (film.showtimes?.length || 0);
    }, 0);
    totalShowtimesEl.textContent = totalShowtimes;
}

// Populate filter dropdowns
function populateFilters() {
    // Populate cinema filter
    const sortedCinemas = Array.from(cinemas).sort();
    sortedCinemas.forEach(cinema => {
        const option = document.createElement('option');
        option.value = cinema;
        option.textContent = cinema;
        cinemaFilter.appendChild(option);
    });
    
    // Populate genre filter
    const sortedGenres = Array.from(genres).sort();
    sortedGenres.forEach(genre => {
        const option = document.createElement('option');
        option.value = genre;
        option.textContent = genre;
        genreFilter.appendChild(option);
    });
}

// Smooth scroll to films section
function scrollToFilms() {
    document.getElementById('films').scrollIntoView({
        behavior: 'smooth'
    });
}

// Add click handlers for navigation
document.addEventListener('DOMContentLoaded', () => {
    const navLinks = document.querySelectorAll('.nav-links a');
    navLinks.forEach(link => {
        link.addEventListener('click', (e) => {
            if (link.getAttribute('href').startsWith('#')) {
                e.preventDefault();
                const targetId = link.getAttribute('href');
                const targetElement = document.querySelector(targetId);
                if (targetElement) {
                    targetElement.scrollIntoView({
                        behavior: 'smooth'
                    });
                }
            }
        });
    });
});

// Add loading states for images
document.addEventListener('DOMContentLoaded', () => {
    // Add intersection observer for lazy loading optimization
    if ('IntersectionObserver' in window) {
        const imageObserver = new IntersectionObserver((entries, observer) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const img = entry.target;
                    if (img.dataset.src) {
                        img.src = img.dataset.src;
                        img.removeAttribute('data-src');
                        observer.unobserve(img);
                    }
                }
            });
        });

        // Observe all images with data-src
        document.querySelectorAll('img[data-src]').forEach(img => {
            imageObserver.observe(img);
        });
    }
});
</script>
</body>
</html>